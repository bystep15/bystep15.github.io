<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Bystep15.GitHub.io by bystep15</title>
        <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../../stylesheets/stylesheet.css" media="screen">
        <link rel="stylesheet" href="../../stylesheets/print.css" media="print">
        <link rel="stylesheet" href="../../stylesheets/flexbox.css">
        <link rel="stylesheet" href="../../stylesheets/github-gist.css">
        <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script src="/javascripts/jquery-1.11.3.js"></script>
        <script src="/javascripts/highlight.pack.js"></script>
    </head>
    <body>
        <header>
            <div class="inner">
                <h1>Bystep15.GitHub.io</h1>
                <h2>宝宝树前端团队</h2>
                <a href="https://github.com/bystep15" class="button"><small>Follow me on</small> GitHub</a>
            </div>
        </header>
        
        <div id="content-wrapper">
            <div class="main clearfix">
                <div id="got-gridbox">
                    <figure>
                        <img src="../../images/flexbox/daenerys-targaryen.png" alt="Daenerys Targaryen">
                        <figcaption>Daenerys Targaryen</figcaption>
                    </figure>
                    <figure>
                        <img src="../../images/flexbox/tyrion-lannister.png"  alt="Tyrion Lannister">
                        <figcaption>Tyrion Lannister</figcaption>
                    </figure>
                    <figure>
                        <img src="../../images/flexbox/jamie-lannister.png" alt="Jamie Lannister">
                        <figcaption>Jamie Lannister</figcaption>
                    </figure>
                    <figure>
                        <img src="../../images/flexbox/jon-snow.png" alt="Jon Snow">
                        <figcaption>Jon Snow</figcaption>
                    </figure>
                    <figure>
                        <img src="../../images/flexbox/robb-stark.png" alt="Robb Stark">
                        <figcaption>Robb Stark</figcaption>
                    </figure>
                    <figure>
                        <img src="../../images/flexbox/cersei-lannister.png" alt="Cersei Lannister">
                        <figcaption>Cersei Lannister</figcaption>
                    </figure>
                </div>
                <div class="abstract">
                    原文地址：<a href="http://thenewcode.com/854/Easy-Responsive-Grid-Layout-With-Flexbox">Easy Responsive Grid Layout With Flexbox</a>
                </div>
                
                <aside id="sidebar">
                    <ul class="side-nav">
                        <li><a href="#anchor1">HTML代码</a></li>
                        <li><a href="#anchor2">主体CSS</a></li>
                        <li><a href="#anchor3">最后整理一下</a></li>
                    </ul>
                </aside>
                
                <section id="main-cont">
                    <h1>基于Flex的简单响应式 Grid 布局</h1>
                    <p class="text">
                        为了庆祝一下 HBO 终于推出了《冰与火之歌：权力的游戏4》，也同时帮助我一个一年级的学生重新设计一下他那相当复杂的设计，
                        我决定今天教程的主题是 Grid Layout (栅格布局)。
                    </p>
                    <p class="text">
                        其实以上的设计可以用很多方法实现，包括 display: table-cell,inline-block, 或甚至是用 float，
                        但是我觉得最好的或是最简洁的实现方法就是用 flexbox (当然是在高级浏览器下)。
                    </p>
                    <article>
                        <h2 id="anchor1">HTML 代码</h2>
                        <p class="text">
                            这套方案有一个很高大上的地方，就是所用到的标签很简洁，而且没有那些适配的 hacks。
                            因为插图的缘故，我只在容器 DIV 中展示头两个 figure 元素，所用的插图来自于《冰与火之歌:权力的游戏》，作者：Gavin Bond。
                        </p>
                        <pre><code class="xml">&lt;div id=&quot;got-gridbox&quot;&gt;
    &lt;figure&gt;
        &lt;img src=&quot;daenerys-targaryen.png&quot; alt=&quot;Black and white photograph of Emilia Clarke as Daenerys Targaryen&quot;&gt;
        &lt;figcaption&gt;Daenerys Targaryen&lt;/figcaption&gt;
    &lt;/figure&gt;
    &lt;figure&gt;
        &lt;img src=&quot;tyrion-lannister.png&quot; alt=&quot;Black and white photograph of Peter Dinklage as Tyrion Lannister&quot;&gt;
        &lt;figcaption&gt;Tyrion Lannister&lt;/figcaption&gt;
    &lt;/figure&gt;
    …
&lt;/div&gt;</code></pre>
                    </article>
                    <article>
                        <h2 id="anchor2">主体 CSS</h2>
                        <p class="text">
                            首先，我们将 DIV 容器设置成 display: flexbox, 用 justify-content 将里面的元素分隔开来。
                            行式布局依靠 flex-flow:row-wrap 属性.
                            (同理的，在我最近的一篇文章中用flex实现的磁贴式布局是一种列式布局，用到flex-box: column-wrap属性)
                            全局盒模型 box-sizing 的覆写是为了避免在我给 figure 元素添加边框后导致整个布局的错位。
                        </p>
                        <pre><code class="css">* {
    box-sizing: border-box;
}

#got-gridbox {
    display: flex;
    flex-flow: row wrap;
    justify-content: space-between;
}</code></pre>
                        <p class="text">
                            (浏览器前缀没有加是为了让展示的代码看起来更加简洁，比较新版的浏览器对于 flexbox 的支持已经不再需要特定前缀了，除了Safari。)
                        </p>
                        <p class="text">
                            下一步，我们来设置 figure 元素。
                        </p>
                        <pre><code class="css">#got-gridbox figure {
    border: 1px solid #333;
    position: relative;
    font-size: 0;
    margin: 2% 0;
    flex: 0 0 48%;
}</code></pre>
                        <p class="text">
                            对每个 figure 加上 position: relative 属性，这样可以给里面的标题文本进行绝对定位。
                            设定 font-size: 0 的目的是为了“吸光 figure 元素里的空气”---这样不会让其出现莫名的空隙。
                        </p>
                        <p class="text">
                            样式的关键当然是 flexbox 属性了，以后会对其有更详细的说明。现在，加之之前几篇文章的讨论，我们已经对它有了足够多的了解。
                        </p>
                        <p class="text">
                            首先确保 figure 的宽度是容器的48%，在元素间留出4%的空隙。
                            空隙通过 margin 来实现，上下各有2%的外补白，这样可以在上下两行间产生4%的行距。
                            另一种可以的方法是 flex: 0 0 50%，不用设置 margin ，这样也可以作出无空白的两列式栅栏。
                        </p>
                        <p class="text">
                            接着，将 figure 中的图片改成响应式的。
                        </p>
                        <pre><code class="css">#got-gridbox figure img {
    width: 60%;
    height: auto;
    margin-top: -2rem;
}</code></pre>
                        <p class="text">
                            用到的每一张图片都是同样大小与透明度的 PNG 图，填充到 figure 的方式也完全一致。
                            我在 margin-top 上用了负值，这样可以让人物“走出” figure 元素，让每个 PNG 图片穿过容器顶部。
                        </p>
                        <p class="text">
                            唯一不同的地方就是在右边框的图片需要向右对齐：
                        </p>
                        <pre><code class="css">#got-gridbox figure:nth-child(even) img {
    float: right;
}</code></pre>
                        <p class="text">
                            在左边这一栏中，&lt;figcaption&gt;元素应该在&lt;figure&gt;的右边，我们(先)将这种情况定高默认值。
                        </p>
                        <pre><code class="css">#got-gridbox figure figcaption {
    position: absolute;
    right: 4%;
    top: 5%;
    font-family: Deseret, Trajan Pro, Trajan, Requiem, serif;
    text-transform: uppercase;
    font-size: 1.6rem;
    text-align: right;
}</code></pre>
                        <p class="text">
                            Deseret 是一种只针对大写字幕的字体，而且不是每台机器里都有，所以我们得在这里作降级处理，给它设定几个后备字体。
                        </p>
                        <p class="text">
                           在右栏的&lt;figcaption&gt; 元素是在对应的方向上。
                        </p>
                        <pre><code class="css">#got-gridbox figure:nth-child(even) figcaption {
    left: 4%;
    right: auto;
    text-align: left;
}</code></pre>
                        <p class="text">
                            这里呈现的是一些主要用到的属性。在这充分运用了 flexbox 天生的响应式能力，
                            除此之处，我唯一添加的也就是在屏幕变小时适当的改变一下字体的大小。
                        </p>
                    </article>
                    <article>
                        <h2 id="anchor3">最后整理一下</h2>
                        <div class="clearfix">
                            <div class="illustation">
                                <img src="../../images/flexbox/cersei-lannister-full.jpg"/>
                                <p>在Cersei Lannister的黑白图上面附一个带有透明度的蒙板，这样桌子看起来是在图片的底边上</p>
                            </div>
                            <p class="text">
                                最后的两张图片我给自己加了一点有趣的点缀：两张图里都有一张桌子，把桌子给抠掉或是裁掉不是一个很好的选择。
                                不管的话真实图片又不会充满父级元素，期待着用 Photoshop 把图再修一篇也不是个好选择。
                                结果呢，单独处理这个系统的最后两张图片就显得有点棘手了：绝大多数的开发者应该都会在这两个标签上加一个类，我不太想这么干。
                            </p>
                            <p class="text">
                                换个思路，我决定用 <a href="http://thenewcode.com/231/Linear-Gradients-In-CSS3">CSS linear gradient</a> 来给它
                                画一个虚拟的桌子。用伪类选择符 nth-last-child 来选取最后两个 figure 元素。
                            </p>
                            <pre><code class="css">#got-gridbox figure:nth-last-child(-n+2) {
    background-image: linear-gradient(transparent, transparent 80%, #111 81%);
}</code></pre>
                            <p class="text">
                                最后，在适当的视窗宽度范围内调整一下标题字体的大小。
                            </p>
                            <pre><code class="css">@media screen and (max-width: 900px) {
    #got-gridbox figure figcaption {
        font-size: 1.4rem;
    }
}

@media screen and (max-width: 800px) {
    #got-gridbox figure figcaption {
        font-size: 1.25rem;
    }
}</code></pre>
                            <p class="text">
                                当然也可以用 vm 作为单位来对字体大小进行设定，同时用 @media 对其上限和下限进行限定。
                            </p>
                            <pre><code class="css">@media screen and (max-width: 750px) {
    #got-gridbox figure {
        flex: 0 0 100%;
        margin-bottom: 7%;
    }
    #got-gridbox figure figcaption {
        font-size: 1.6rem;
    }
}

@media screen and (max-width: 450px) {
    #got-gridbox figure figcaption {
        font-size: 1.2rem;
        width: 50%;
    }
}</code></pre>
                            <p class="text">
                                就是这样！如你所见，flexbox 让页面中的栅栏式布局变得更简单，再不用找那些非主流方法甚至是 hacker 方式了。
                            </p>
                        </div>
                    </article>
                </section>
            </div>
        </div>
        <script>
            hljs.initHighlightingOnLoad({useBR: true});
            $(document).ready(function() {
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>
    </body>
</html>